//这是水晶之约的脚本语法说明

@跳转符
#注释符
$变量符


//脚本控制语句
goto("跳转行的名称");				//跳转指令

add(被加数的序号,加数,1为加0为减);		//加减指令

set(变量序号,赋值);				//赋值指令

if(检测数的序号,检测值,"跳转行号");		//条件跳转指令

delay(延时长度);				//延时指令

end();						//立刻结束脚本

call("脚本文件名");				//调用脚本子程序

return();					//返回上一级脚本继续执行


//对话控制语句
talk(照片序号,"要说的话");			//交谈指令

load_photo("照片文件名");			//加载对话系统照片



//NPC控制语句
set_NPC_status(NPC代号,设置NPC运动状态);	//设置NPC可否自由走动
状态列表：
 0   静止
 1   随机运动
NPC代号为0时则控制主角移动

NPC_walk(NPC代号,方向,走几步);			//命令NPC走动
方向列表：
上   2
下   0
左   1
右   3
!用此句前一定先要把NPC_status设为静止!

player_walk(方向,走几步);

NPC_set(NPC代号,X坐标,Y坐标);			//将NPC瞬移
!用此句前一定先要把NPC_status设为静止!

NPC_turn(NPC代号,方向);				//使NPC转方向
!用此句前一定先要把NPC_status设为静止!

init_NPC(x坐标,y坐标,方向,步长,是否自由移动,图片代号,"脚本文件名");	//初始化一个NPC

load_NPC_image("NPC图片文件名");		//加载NPC图片,只用在start中,否则混乱

clr_all_NPC();					//清除所有NPC,包括主角

choose_player(NPC代号);                         //选择一个NPC为主角

get_NPC_dir(NPC代号,变量号);			//将NPC方向放到制定变量中



//屏幕控制语句
set_screen_status(设置屏幕的状态);		//设置屏幕是否锁定主角
0    锁定主角
1    静止或由脚本驱动

screen_set(xx,yy);				//屏幕瞬移到xx,yy
!用此句前一定先要把screen_status设为静止!

screen_move(xx,yy,屏幕移动速度);		//把屏幕从当前位置移动到xx,yy
!用此句前一定先要把screen_status设为静止!
速度取值1,2,3,4等

go_inout(目标颜色,判断参数)			//淡入淡出指令
参数取值：
0    淡入
1    淡出

set_weather(天气状况)				//设置天气
0      好天
1      下雪

set_light(颜色,亮度)				//设置光照

rgb2color(变量号,r,g,b)				//根据rgb合成颜色



//初始化语句
set_game_status(游戏运行状态);			//用于读地图等操作时挂起游戏
0    正常
1    挂起

load_map("地图逻辑文件","地面层","天空层");		//加载地图

hook_data("脚本文件名");			//添加脚本信息到陷阱查询库

add_hook(x,y,查询库的代号,陷阱类型);		//添加陷阱到地图
类型:
0    没有陷阱
1    可走陷阱
2    不可走陷阱

del_hook(x,y);					//删除x,y处的陷阱

kill_all_hook();				//清除所有陷阱,加载地图时会自动进行


//物品控制语句

向物品查询库中加入物品
init_obj_lib(加血值,加魔法值,加攻击值,加防御值,加经验值,是否剧情物品,"物品名称","照片文件名");


//主角控制语句

初始化主角查询库
init_actor_lib(hp,最大hp,mp,最大mp,攻击力,防御力,经验值,等级,"主角姓名","照片文件名");

向队伍中加入主角
add_actor(主角在查询库中代号);

向队伍的物品包中加入物品
add_obj(该物品的序号,加入的数目);

map_choice(返回变量号,str1,str2,str3,str4);

//屏幕上显示一个小画面的东东，用于出字幕，或显示一个小气泡
//开启一个画面
show_screen_image(xx,yy,画面的序号,透明度);
//初始化一张图象
init_screen_image("画面的文件名");
//关闭画面
shut_screen_image();

quit();退出游戏

//音效控制

播放midi
play_midi("文件名");

停止midi
stop_midi();

渐渐停止midi
midi_out();

播放wav
play_sound("文件名");