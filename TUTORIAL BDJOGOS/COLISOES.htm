<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0056)http://www.bdjogos.com/conteudo.php?link=capitulo_27.php -->
<HTML><HEAD><TITLE></TITLE>
<META content="" name=title>
<META 
content="Biblioteca de programação de jogos brasileira. Conteúdo Aberto! A Biblioteca dos Desenvolvedores de jogos" 
name=description>
<META 
content="Jogos Biblioteca biblio Desenvolvimento Desenvolvedores Desenvolver programa programação games melhor ambicioso programações progra programar c/ c/c++ c++ java asp pascal algoritmo bdjogos exercícios nintendo Allegro Desenvolvimento de Jogos Programação de Jogos Desenvolvimento para Consoles Programação para Consoles ds nintendods visual double buffer 3d graficos 3D matematica aritme timer int string" 
name=keywords>
<META content=www.bdjogos.com.br name=url>
<META content=Portuguese name=language>
<META content="Adriano Waltrick - Bruno A. Rovela" name=author>
<META content=GNU name=copyright>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1"><LINK 
href="COLISOES_arquivos/estilos.css" type=text/css rel=stylesheet><LINK 
href="COLISOES_arquivos/indentador.css" type=text/css rel=stylesheet>
<SCRIPT language=javascript src="COLISOES_arquivos/indentador.js"></SCRIPT>

<META content="MSHTML 6.00.2900.2180" name=GENERATOR></HEAD>
<BODY vLink=#cd1006 aLink=#cd1006 link=#cd1006 bgColor=#ffffff leftMargin=0 
background=COLISOES_arquivos/bg.jpg topMargin=0 marginheight="0" 
marginwidth="0">
<SCRIPT language=javascript src="COLISOES_arquivos/posicao_mouse.js" 
type=text/javascript></SCRIPT>

<SCRIPT language=javascript>
/*
Autor 			: Adriano
Data  			: 18/08/2006
Descrição		: faz uma layer seguir o mouse
*/
function atualiza_pos_layer( vlayer )
{	
	vlayer.style.visibility = 'visible';
	getMouse_Posicao(document.onmousemove);
			
	
	vlayer.top  = pos_mouse_y+30;
	vlayer.left = pos_mouse_x+10;
	
	vlayer.style.top  = pos_mouse_y+30;
	vlayer.style.left = pos_mouse_x+10;

	
	vlayer.style.pixelTop = pos_mouse_y+30;
	vlayer.style.pixelLeft = pos_mouse_x+10;
}

function atualiza_pos_layer2( vlayer )
{	
	vlayer.style.visibility = 'visible';
	getMouse_Posicao(document.onmousemove);
			
	
	vlayer.top  = pos_mouse_y-130;
	vlayer.left = pos_mouse_x+10;
	
	vlayer.style.top  = pos_mouse_y-130;
	vlayer.style.left = pos_mouse_x+10;

	
	vlayer.style.pixelTop = pos_mouse_y-130;
	vlayer.style.pixelLeft = pos_mouse_x+10;
}

function atualiza_layer( vlayer )
{
	vlayer.style.visibility = 'hidden';
}
</SCRIPT>

<STYLE type=text/css>#layer_menu1 {
	Z-INDEX: 1; LEFT: 10px; VISIBILITY: hidden; WIDTH: 220px; CURSOR: hand; POSITION: absolute; TOP: 10px; HEIGHT: 25px
}
#layer_menu2 {
	Z-INDEX: 1; LEFT: 10px; VISIBILITY: hidden; WIDTH: 150px; CURSOR: hand; POSITION: absolute; TOP: 10px; HEIGHT: 25px
}
#layer_menu3 {
	Z-INDEX: 1; LEFT: 10px; VISIBILITY: hidden; WIDTH: 150px; CURSOR: hand; POSITION: absolute; TOP: 10px; HEIGHT: 25px
}
#layer_menu4 {
	Z-INDEX: 1; LEFT: 10px; VISIBILITY: hidden; WIDTH: 150px; CURSOR: hand; POSITION: absolute; TOP: 10px; HEIGHT: 25px
}
#layer_procurar {
	Z-INDEX: 2; LEFT: 584px; WIDTH: 196px; POSITION: absolute; TOP: 47px; HEIGHT: 25px
}
</STYLE>

<DIV id=layer_menu1>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD width="1%"><IMG height=8 src="COLISOES_arquivos/borda_cima1.gif" 
      width=8></TD>
    <TD width="97%" background=COLISOES_arquivos/linha_hor_cima.gif><IMG 
      height=8 src="COLISOES_arquivos/linha_hor_cima.gif" width=8></TD>
    <TD width="2%"><IMG height=8 src="COLISOES_arquivos/borda_cima2.gif" 
      width=8></TD></TR>
  <TR>
    <TD background=COLISOES_arquivos/linha_vertical.gif>
      <DIV align=left></DIV></TD>
    <TD class=conteudo bgColor=#ffffff>Conheça a iniciativa da Biblioteca dos 
      Desenvolvedores</TD>
    <TD background=COLISOES_arquivos/linha_ver_di.gif>&nbsp;</TD></TR>
  <TR>
    <TD><IMG height=8 src="COLISOES_arquivos/borda_baixo1.gif" width=8></TD>
    <TD vAlign=center background=COLISOES_arquivos/linha_horizo.gif><IMG 
      height=8 src="COLISOES_arquivos/linha_horizo.gif" width=8></TD>
    <TD><IMG height=8 src="COLISOES_arquivos/borda_baixo2.gif" 
  width=8></TD></TR></TBODY></TABLE></DIV>
<DIV id=layer_menu2>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD width="1%"><IMG height=8 src="COLISOES_arquivos/borda_cima1.gif" 
      width=8></TD>
    <TD width="97%" background=COLISOES_arquivos/linha_hor_cima.gif><IMG 
      height=8 src="COLISOES_arquivos/linha_hor_cima.gif" width=8></TD>
    <TD width="2%"><IMG height=8 src="COLISOES_arquivos/borda_cima2.gif" 
      width=8></TD></TR>
  <TR>
    <TD background=COLISOES_arquivos/linha_vertical.gif>
      <DIV align=left></DIV></TD>
    <TD class=conteudo bgColor=#ffffff>Índice da Biblioteca</TD>
    <TD background=COLISOES_arquivos/linha_ver_di.gif>&nbsp;</TD></TR>
  <TR>
    <TD><IMG height=8 src="COLISOES_arquivos/borda_baixo1.gif" width=8></TD>
    <TD vAlign=center background=COLISOES_arquivos/linha_horizo.gif><IMG 
      height=8 src="COLISOES_arquivos/linha_horizo.gif" width=8></TD>
    <TD><IMG height=8 src="COLISOES_arquivos/borda_baixo2.gif" 
  width=8></TD></TR></TBODY></TABLE></DIV>
<DIV id=layer_menu3>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD width="1%"><IMG height=8 src="COLISOES_arquivos/borda_cima1.gif" 
      width=8></TD>
    <TD width="97%" background=COLISOES_arquivos/linha_hor_cima.gif><IMG 
      height=8 src="COLISOES_arquivos/linha_hor_cima.gif" width=8></TD>
    <TD width="2%"><IMG height=8 src="COLISOES_arquivos/borda_cima2.gif" 
      width=8></TD></TR>
  <TR>
    <TD background=COLISOES_arquivos/linha_vertical.gif>
      <DIV align=left></DIV></TD>
    <TD class=conteudo bgColor=#ffffff>Área dos Usuários</TD>
    <TD background=COLISOES_arquivos/linha_ver_di.gif>&nbsp;</TD></TR>
  <TR>
    <TD><IMG height=8 src="COLISOES_arquivos/borda_baixo1.gif" width=8></TD>
    <TD vAlign=center background=COLISOES_arquivos/linha_horizo.gif><IMG 
      height=8 src="COLISOES_arquivos/linha_horizo.gif" width=8></TD>
    <TD><IMG height=8 src="COLISOES_arquivos/borda_baixo2.gif" 
  width=8></TD></TR></TBODY></TABLE></DIV>
<DIV id=layer_menu4>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD width="1%"><IMG height=8 src="COLISOES_arquivos/borda_cima1.gif" 
      width=8></TD>
    <TD width="97%" background=COLISOES_arquivos/linha_hor_cima.gif><IMG 
      height=8 src="COLISOES_arquivos/linha_hor_cima.gif" width=8></TD>
    <TD width="2%"><IMG height=8 src="COLISOES_arquivos/borda_cima2.gif" 
      width=8></TD></TR>
  <TR>
    <TD background=COLISOES_arquivos/linha_vertical.gif>
      <DIV align=left></DIV></TD>
    <TD class=conteudo bgColor=#ffffff>Fórum de Discussão</TD>
    <TD background=COLISOES_arquivos/linha_ver_di.gif>&nbsp;</TD></TR>
  <TR>
    <TD><IMG height=8 src="COLISOES_arquivos/borda_baixo1.gif" width=8></TD>
    <TD vAlign=center background=COLISOES_arquivos/linha_horizo.gif><IMG 
      height=8 src="COLISOES_arquivos/linha_horizo.gif" width=8></TD>
    <TD><IMG height=8 src="COLISOES_arquivos/borda_baixo2.gif" 
  width=8></TD></TR></TBODY></TABLE></DIV>
<DIV id=layer_procurar>
<TABLE cellSpacing=1 cellPadding=2 width="100%" border=0>
  <FORM id=form1 name=form1 action=procurar.php method=post>
  <TBODY>
  <TR>
    <TD><LABEL>
      <DIV align=right><INPUT class=conteudo2 size=15 name=procurar> 
      </DIV></LABEL></TD></TR>
  <TR>
    <TD>
      <DIV align=right><INPUT class=conteudo2 type=submit value=Pesquisar name=Submit> 
      </DIV></TD></TR></FORM></TBODY></TABLE></DIV>
<TABLE cellSpacing=0 cellPadding=0 width=781 border=0>
  <TBODY>
  <TR>
    <TD vAlign=top colSpan=2 height=101>
      <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
        <TBODY>
        <TR>
          <TD vAlign=top width=235 height=101><A 
            href="http://www.bdjogos.com/"><IMG alt="" 
            src="COLISOES_arquivos/index_01.jpg" border=0></A></TD>
          <TD vAlign=top width=81><A 
            onmousemove=atualiza_pos_layer(layer_menu1); 
            onmouseout=atualiza_layer(layer_menu1); 
            href="http://www.bdjogos.com/conteudo.php"><IMG 
            src="COLISOES_arquivos/index_02.jpg" border=0> </A></TD>
          <TD vAlign=top width=73><A 
            onmousemove=atualiza_pos_layer(layer_menu2); 
            onmouseout=atualiza_layer(layer_menu2); 
            href="http://www.bdjogos.com/biblioteca.php"><IMG 
            src="COLISOES_arquivos/index_03.jpg" border=0></A></TD>
          <TD vAlign=top width=80><A 
            onmousemove=atualiza_pos_layer(layer_menu3); 
            onmouseout=atualiza_layer(layer_menu3); 
            href="http://www.bdjogos.com/usuarios.php"><IMG 
            src="COLISOES_arquivos/index_04.jpg" border=0></A></TD>
          <TD vAlign=top width=90><A 
            onmousemove=atualiza_pos_layer(layer_menu4); 
            onmouseout=atualiza_layer(layer_menu4); 
            href="http://www.bdjogos.com/forum/"><IMG alt=Forúm 
            src="COLISOES_arquivos/index_05.jpg" border=0></A></TD>
          <TD vAlign=top width=221><IMG alt="" 
            src="COLISOES_arquivos/index_06.jpg"></TD></TR></TBODY></TABLE></TD>
    <TD vAlign=top width=1 background=COLISOES_arquivos/111.jpg rowSpan=2><IMG 
      height=1 src="COLISOES_arquivos/111.jpg" width=1></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width=781 border=0>
  <TBODY>
  <TR>
    <TD width=27 height=10></TD>
    <TD width=228></TD>
    <TD width=22></TD>
    <TD width=228></TD>
    <TD width=22></TD>
    <TD width=228></TD>
    <TD width=25></TD>
    <TD vAlign=top width=1 background=COLISOES_arquivos/111.jpg rowSpan=2><IMG 
      height=1 src="COLISOES_arquivos/111.jpg" width=1></TD></TR>
  <TR>
    <TD height=333>&nbsp;</TD>
    <TD vAlign=top colSpan=5>
      <TABLE cellSpacing=0 cellPadding=0 width=728 bgColor=#ffffff border=0>
        <TBODY>
        <TR>
          <TD vAlign=top colSpan=3 height=21><IMG height=21 
            src="COLISOES_arquivos/sub-1.jpg" width=728></TD></TR>
        <TR>
          <TD width=10 height=303>&nbsp;</TD>
          <TD vAlign=top>
            <P class=titulos>27 - Detectando colisões </P>
            <P class=conteudo>O Ato de detectar colisões entre desenhos é muito 
            importante para qualquer tipo de jogo.<BR>Em um jogo como o Super 
            Mario por exemplo, não podemos sair da tela, nem podemos tocar do 
            lado dos inimigos.</P>
            <P class=conteudo>Para isso foi programado uma detecção de colisão, 
            que na verdade é uma formula bem simples. </P>
            <P class=conteudo>Todo objeto na tela deve ter uma posição X e Y 
            definida, desta forma,<BR>podemos saber se o X e Y de um objeto está 
            dentro da área do X e Y de outro objeto. </P>
            <P class=conteudo>Primeiro, vamos fazer a colisão de um objeto com a 
            tela.<BR>Sabemos que no Allegro, a posição 0,0 é o limite esquerdo e 
            do topo.<BR><BR>Usaremos uma variável da Allegro para saber qual é o 
            tamanho máximo da tela para pegar-mos o X e Y do limite direito e 
            final da tela.</P>
            <TABLE cellSpacing=0 cellPadding=0 width="80%" align=center 
            bgColor=#000099 border=0>
              <TBODY>
              <TR>
                <TD>
                  <TABLE cellSpacing=1 cellPadding=5 width="100%" align=center 
                  border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=#f7f7f7>
                        <P class=conteudo><SPAN class=titulos_texto><IMG 
                        height=17 src="COLISOES_arquivos/pic_pisca.gif" 
                        width=17> FÓRMULA</SPAN></P>
                        <P class=conteudo>- A posição X do objeto não pode ser 
                        menor que zero <BR>- A posição de X + o tamanho do 
                        objeto ( em X ) não pode ser maior que o limite da tela. 
                        Se for maior, o objeto vai sair da tela. <BR><BR>- A 
                        posição Y do objeto não pode ser menor que zero <BR>- A 
                        posição de Y + o tamanho do objeto ( em Y ) não pode ser 
                        maior que o limite da tela. Se for maior, o objeto vai 
                        sair da tela. </P>
                        <P class=conteudo>Tome cuidado quando o objeto tiver um 
                        tamanho X diferente do tamanho 
                    Y<BR><BR></P></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
            <P class=titulos>&nbsp;</P>
            <HR>
            <SPAN class=titulos_texto>CÓDIGO... </SPAN>
            <HR>
            <SPAN class=codigo><SPAN class=comentario>// Colisão com os cantos 
            da tela</SPAN><BR>#include &lt;allegro.h&gt;<BR><BR>int 
            main()<BR>{<BR>&nbsp;&nbsp;&nbsp;allegro_init();<BR>&nbsp;&nbsp;&nbsp;set_color_depth(16);<BR>&nbsp;&nbsp;&nbsp;install_keyboard();<BR>&nbsp;&nbsp;&nbsp;set_gfx_mode(GFX_AUTODETECT_FULLSCREEN, 
            640, 480, 0, 
            0);<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// inicio da programação 
            atual</SPAN><BR>&nbsp;&nbsp;&nbsp;int x = 
            0;<BR>&nbsp;&nbsp;&nbsp;int y = 
            0;<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// dimensao do 
            quadrado</SPAN><BR>&nbsp;&nbsp;&nbsp;<SPAN class=comentario>// 
            variáveis constantes nunca mudam durante a execução do 
            programa</SPAN><BR>&nbsp;&nbsp;&nbsp;const int tamanho = 
            100;<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// Laço 
            principal</SPAN><BR>&nbsp;&nbsp;&nbsp;while( !key[KEY_ESC] 
            )<BR>&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( 
            key[KEY_UP] 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y--;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
            ( key[KEY_DOWN] 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y++;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
            ( key[KEY_LEFT] 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x--;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
            ( key[KEY_RIGHT] 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x++;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// limitando o quadrado dentro da 
            tela</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( x &lt; 0 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x 
            = 
            0;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
            ( (x+tamanho) &gt; SCREEN_W 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x 
            = SCREEN_W - 
            tamanho;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
            ( y &lt; 0 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y 
            = 
            0;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
            ( (y+tamanho) &gt; SCREEN_H 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y 
            = SCREEN_H - 
            tamanho;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// esta função limpa a 
            tela</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear( screen 
            );<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// escrevemos um quadrado na tela na posição x e 
            y</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rectfill( screen, x, 
            y, x+tamanho, y+tamanho, makecol(255, 0, 0) 
            );<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// imprimimos as coordenadas x e y na tela para o 
            usuário 
            ver</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textprintf_ex( 
            screen, font, 10, 10, makecol(255,0,0), -1, "Variavel X: %d", 
            x);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textprintf_ex( screen, 
            font, 10, 20, makecol(255,0,0), -1, "Variavel Y: %d", 
            y);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// essa função faz o allegro esperar um pouco antes 
            de voltar para o 
            while</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rest(10);<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;allegro_exit();<BR>&nbsp;&nbsp;&nbsp;return 
            0;<BR>}<BR>END_OF_MAIN();<BR></SPAN><BR>
            <HR>
            <SPAN class=titulos_texto>FIM DE CÓDIGO... </SPAN>
            <HR>

            <P class=conteudo>Basicamente:</P>
            <P class=conteudo align=center><IMG height=96 
            src="COLISOES_arquivos/capitulo27_01.gif" width=131 border=1></P>
            <P class=conteudo>Imagine que as linhas pretas são os limites da 
            tela.<BR>Temos que, o x de nosso quadrado nunca pode ser menor que o 
            x limite da tela.<BR>Para resolver isso fizemos:</P>
            <P class=conteudo><SPAN 
            class=codigo>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( x &lt; 0 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x 
            = 0;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN> </P>
            <P class=conteudo>O mesmo para o y.</P>
            <P class=conteudo>Agora, para testar os limites finais da tela:</P>
            <P class=conteudo align=center><IMG height=96 
            src="COLISOES_arquivos/capitulo27_02.gif" width=145 border=1> </P>
            <P class=conteudo>Imagine que em x=100 o quadrado já está tocando no 
            final da tela.<BR>Para testar isso, fizemos o seguinte:</P>
            <P class=conteudo><SPAN 
            class=codigo>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( (x+tamanho) 
            &gt; SCREEN_W 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x 
            = SCREEN_W - 
            tamanho;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></P>
            <P class=conteudo>Se imaginarmos que o SCREEN_W seja de 200, podemos 
            dizer que<BR>x ( 100 ) + tamanho ( 100 ) nunca pode ser maior que o 
            SCREEN_W.</P>
            <P class=conteudo>O mesmo acontece para y. </P>
            <TABLE cellSpacing=0 cellPadding=0 width="80%" align=center 
            bgColor=#000099 border=0>
              <TBODY>
              <TR>
                <TD>
                  <TABLE cellSpacing=1 cellPadding=5 width="100%" align=center 
                  border=0>
                    <TBODY>
                    <TR>
                      <TD bgColor=#f7f7f7>
                        <P class=conteudo><SPAN class=titulos_texto><IMG 
                        height=17 src="COLISOES_arquivos/pic_pisca.gif" 
                        width=17> Dica </SPAN></P>
                        <P class=conteudo>Fique esperto com estes testes quando 
                        o tamanho do objeto for difrente para X e 
                      Y.<BR><BR></P></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
            <P class=conteudo>&nbsp;</P>
            <P class=conteudo> </P>
            <P class=conteudo>Agora vamos inserir um quadrado no meio da tela, e 
            vamos fazer um teste de colisão neste quadrado. </P>
            <P class=conteudo>&nbsp;</P>
            <HR>
            <SPAN class=titulos_texto>CÓDIGO... </SPAN>
            <HR>
            <SPAN class=codigo><SPAN class=comentario>// Colisão com os cantos 
            da tela</SPAN><BR>#include &lt;allegro.h&gt;<BR><BR>int 
            main()<BR>{<BR>&nbsp;&nbsp;&nbsp;allegro_init();<BR>&nbsp;&nbsp;&nbsp;set_color_depth(16);<BR>&nbsp;&nbsp;&nbsp;install_keyboard();<BR>&nbsp;&nbsp;&nbsp;set_gfx_mode(GFX_AUTODETECT_FULLSCREEN, 
            640, 480, 0, 0);<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// inicio da programação 
            atual</SPAN><BR>&nbsp;&nbsp;&nbsp;int x = 
            0;<BR>&nbsp;&nbsp;&nbsp;int y = 0;<BR>&nbsp;&nbsp;&nbsp;const int 
            tamanho = 50;<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;const int 
            obj_tam = 100;<BR>&nbsp;&nbsp;&nbsp;const int obj_x = ( SCREEN_W - 
            (obj_tam / 2) ) / 2;<BR>&nbsp;&nbsp;&nbsp;const int obj_y = ( 
            SCREEN_H - (obj_tam / 2) ) / 
            2;<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;bool colide = 
            false;<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// Criando BUFFER para double 
            buffer</SPAN><BR>&nbsp;&nbsp;&nbsp;BITMAP *buffer = 
            NULL;<BR>&nbsp;&nbsp;&nbsp;buffer = 
            create_bitmap(800,800);<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// Laço 
            principal</SPAN><BR>&nbsp;&nbsp;&nbsp;while( !key[KEY_ESC] 
            )<BR>&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
            ( colide == false 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
            ( key[KEY_UP] 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y--;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
            ( key[KEY_DOWN] 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y++;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
            ( key[KEY_LEFT] 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x--;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
            ( key[KEY_RIGHT] 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x++;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// limpa o nosso novo 
            buffer</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clear( buffer 
            );<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// escreve o quadrado no 
            buffer</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rectfill( 
            buffer, x, y, x+tamanho, y+tamanho, makecol(255, 0, 0) 
            );<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rectfill( 
            buffer, obj_x, obj_y, obj_x+obj_tam, obj_y+obj_tam, makecol(0, 0, 
            255) 
            );<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// imprimimos as coordenadas x e y na tela para o 
            usuário ver no 
            buffer</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textprintf_ex( 
            buffer, font, 10, 10, makecol(255,0,0), -1, "Variavel X: %d", 
            x);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textprintf_ex( buffer, 
            font, 10, 20, makecol(255,0,0), -1, "Variavel Y: %d", 
            y);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textprintf_ex( 
            buffer, font, 10, 30, makecol(255,0,0), -1, "obj X: %d", 
            obj_x);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textprintf_ex( 
            buffer, font, 10, 40, makecol(255,0,0), -1, "obj Y: %d", 
            obj_y);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// verifica se 
            colide</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( 
            (x+tamanho) &gt;= obj_x &amp;&amp; x &lt;= obj_x+obj_tam 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
            ( (y+tamanho) &gt;= obj_y &amp;&amp; y &lt;= obj_y+obj_tam 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textout_ex(buffer, 
            font, "COLIDE", obj_x+25, obj_y+50, makecol(0, 255, 0), 
            -1);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// imprime o buffer na 
            tela</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vsync();<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blit(buffer, 
            screen, 0,0,0,0, SCREEN_W, 
            SCREEN_H);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// essa função faz o allegro esperar um pouco antes 
            de voltar para o 
            while</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rest(10);<BR>&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;<BR>&nbsp;&nbsp;&nbsp;allegro_exit();<BR>&nbsp;&nbsp;&nbsp;return 
            0;<BR>}<BR>END_OF_MAIN();<BR></SPAN>
            <HR>
            <SPAN class=titulos_texto>FIM DE CÓDIGO... </SPAN>
            <HR>

            <P class=conteudo>Primeiro exemplo:</P>
            <P class=conteudo><IMG height=204 
            src="COLISOES_arquivos/capitulo27_03.gif" width=209> </P>
            <P><SPAN class=conteudo>Neste caso, a imagem vermelha está fora dos 
            limites da imagem do centro azul. </SPAN></P>
            <P><SPAN class=codigo><SPAN class=conteudo><IMG height=204 
            src="COLISOES_arquivos/capitulo27_04.gif" 
            width=209></SPAN></SPAN></P>
            <P><SPAN class=conteudo>Neste caso, temos o vermelho dentro do 
            limite X da imagem azul, porém, o vermelho continua fora do limite 
            Y, logo, ainda não temos uma colisão. </SPAN></P>
            <P><SPAN class=conteudo>Já temos este teste: <BR></SPAN><BR><SPAN 
            class=codigo>&nbsp;if ( (x+tamanho) &gt;= obj_x &amp;&amp; x &lt;= 
            obj_x+obj_tam )</SPAN></P>
            <P><IMG height=204 src="COLISOES_arquivos/capitulo27_05.gif" 
            width=209></P>
            <P>&nbsp;</P>
            <P><SPAN class=conteudo>Neste caso, temos o vermelho dentro do 
            limite Y da imagem azul, porém, o vermelho continua fora do limite 
            X, logo, ainda não temos uma colisão. </SPAN></P>
            <P><SPAN class=conteudo>Neste caso, já temos este teste: 
            <BR></SPAN><BR><SPAN class=codigo>&nbsp;if ( (y+tamanho) &gt;= obj_y 
            &amp;&amp; y &lt;= obj_y+obj_tam )</SPAN></P>
            <P>&nbsp;</P>
            <P class=conteudo><IMG height=204 
            src="COLISOES_arquivos/capitulo27_06.gif" width=209></P>
            <P class=conteudo>E no último exemplo, temos a colisão em X e Y 
            dentro dos limites nas imagem azul.<BR>Juntando os 2 testes, 
            temos:</P>
            <P><SPAN class=codigo>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<SPAN 
            class=comentario>// verifica se 
            colide</SPAN><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( 
            (x+tamanho) &gt;= obj_x &amp;&amp; x &lt;= obj_x+obj_tam 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if 
            ( (y+tamanho) &gt;= obj_y &amp;&amp; y &lt;= obj_y+obj_tam 
            )<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;textout_ex(buffer, 
            font, "COLIDE", obj_x+25, obj_y+50, makecol(0, 255, 0), 
            -1);<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN> 
            </P>
            <P></P>
            <P class=conteudo> </P><BR><SPAN class=conteudo><B>Contribuidor</B> 
            <BR>Adriano Waltrick<BR>01/08/2007 </SPAN>
            <P>
            <HR>
            &nbsp;
            <P></P>
            <TABLE cellSpacing=0 cellPadding=0 width="40%" align=center 
            bgColor=#ffffff border=0>
              <TBODY>
              <TR>
                <TD>
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" align=center 
                  bgColor=#000099 border=0>
                    <TBODY>
                    <TR>
                      <TD>
                        <TABLE cellSpacing=1 cellPadding=5 width="100%" 
                        align=center border=0>
                          <TBODY>
                          <TR>
                            <TD bgColor=#f7f7f7>
                              <P class=conteudo align=center><A class=conteudo 
                              href="http://www.bdjogos.com/conteudo.php?link=capitulo_26.php">«&nbsp;Anterior 
                              </A></P></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD>
                <TD>&nbsp;</TD>
                <TD>
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" align=center 
                  bgColor=#000099 border=0>
                    <TBODY>
                    <TR>
                      <TD>
                        <TABLE cellSpacing=1 cellPadding=5 width="100%" 
                        align=center border=0>
                          <TBODY>
                          <TR>
                            <TD bgColor=#f7f7f7>
                              <P class=conteudo align=center><A class=conteudo 
                              href="http://www.bdjogos.com/conteudo.php?link=adicional_27.php">Próximo 
                              » 
                </A></P></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD>
          <TD width=10>&nbsp;</TD></TR>
        <TR>
          <TD height=9></TD>
          <TD></TD>
          <TD></TD></TR></TBODY></TABLE></TD>
    <TD>&nbsp;</TD></TR></TBODY></TABLE>
<SCRIPT 
language=javascript>
salva_codigo();
JsCC_convert();
numeracao();
</SCRIPT>

<TABLE cellSpacing=0 cellPadding=0 width=781 border=0>
  <TBODY>
  <TR>
    <TD vAlign=center align=middle width=780 height=65>
      <P class=conteudo><STRONG><FONT 
      color=#000000>01/06/2007</FONT></STRONG><FONT color=#000000> (C) 
      Copyright. Todos os Direitos Reservados. <A class=codigo 
      href="http://www.bdjogos.com/copy.php">Leia a política de privacidade do 
      portal. </A><BR>É proibida a cópia de conteúdo deste site de acordo com a 
      Lei Brasileira de Direitos Autorais.</FONT></P></TD>
    <TD vAlign=top width=1 background=COLISOES_arquivos/111.jpg><IMG height=1 
      src="COLISOES_arquivos/111.jpg" width=1></TD></TR>
  <TR>
    <TD vAlign=top background=COLISOES_arquivos/111.jpg colSpan=2 
      height=1><IMG height=1 src="COLISOES_arquivos/111.jpg" 
  width=1></TD></TR></TBODY></TABLE>
<SCRIPT type=text/javascript>
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</SCRIPT>

<SCRIPT type=text/javascript>
var pageTracker = _gat._getTracker("UA-1936336-1");
pageTracker._initData();
pageTracker._trackPageview();
</SCRIPT>
</BODY></HTML>
